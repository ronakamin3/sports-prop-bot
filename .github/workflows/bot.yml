name: sports-prop-bot

on:
  schedule:
    - cron: "0 14 * * *"   # 9:00 AM ET
    - cron: "0 20 * * *"   # 3:00 PM ET
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - run: pip install -r requirements.txt

      - run: python bot.py
        env:
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          ODDS_API_KEY: ${{ secrets.ODDS_API_KEY }}

          REGION: us
          TARGET_BOOKS: draftkings,fanduel,betmgm,fanatics

          # âœ… NHL REMOVED
          SPORTS: americanfootball_nfl,basketball_nba,baseball_mlb,soccer_epl,soccer_usa_mls,americanfootball_ncaaf,basketball_ncaab

          EVENTS_PER_SPORT: 6
          PREGAME_BUFFER_MINUTES: 15
          COOLDOWN_MINUTES: 90

          MAX_EDGE_CAP: 0.08
          ONE_PICK_PER_GAME: true
          VERIFY_BEFORE_SEND: true
          MAX_VERIFY_EVENTS: 4
          MAX_ODDS_MOVE_ABS: 25

          # --- SHARP singles ---
          SHARP_MAX_SINGLES: 2
          SHARP_MIN_BOOKS: 4
          SHARP_MIN_P: 0.53
          SHARP_MIN_EDGE: 0.014
          SHARP_MIN_EV: 0.012
          SHARP_MIN_ODDS: -220
          SHARP_MAX_ODDS: 175

          # --- SHARP builder (from SHARP singles only) ---
          ENABLE_SHARP_BUILDER: true
          BUILDER_LEGS: 3
          BUILDER_MIN_DEC: 3.0
          BUILDER_MAX_DEC: 7.0

          # --- LOTTO 3-leg (high variance, optional) ---
          ENABLE_LOTTO_3LEG: true
          LOTTO_LEGS: 3
          LOTTO_MIN_ODDS: 110
          LOTTO_MAX_ODDS: 350
          LOTTO_MIN_BOOKS: 4
          LOTTO_MIN_EDGE: 0.018
          LOTTO_MIN_EV: 0.015
          LOTTO_MAX_TOTAL_DEC: 18.0

          # --- PLUS-MONEY bigger wins ---
          ENABLE_PLUS_SHOTS: true
          PLUS_MAX_PICKS: 1
          PLUS_MIN_ODDS: 160
          PLUS_MAX_ODDS: 320
          PLUS_MIN_BOOKS: 5
          PLUS_MIN_EDGE: 0.020
          PLUS_MIN_EV: 0.015

          # --- High-variance parlay (bigger payout) ---
          ENABLE_HIGHVAR_3LEG: true
          HIGHVAR_LEGS: 3
          HIGHVAR_MIN_ODDS: 140
          HIGHVAR_MAX_ODDS: 350
          HIGHVAR_MIN_TOTAL_DEC: 6.0
          HIGHVAR_MAX_TOTAL_DEC: 20.0

          LINE_TOLERANCE: 1.0
